# üìö Biblioth√®que Municipale - Application Web

![Version](https://img.shields.io/badge/version-0.0.0-blue?style=for-the-badge)
![React](https://img.shields.io/badge/React-19.1.0-61DAFB?style=for-the-badge&logo=react&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-5.8.3-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-6.3.5-646CFF?style=for-the-badge&logo=vite&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)

Une application web moderne de biblioth√®que municipale d√©velopp√©e avec React 19, TypeScript et Vite. Interface compl√®te pour la recherche de livres, exploration de la base OpenLibrary et int√©gration Wikipedia avec routing avanc√© et tests complets. ( si il existe un probleme se r√©f√©rer au rendu moodle)

## üìã Table des Mati√®res

- [üéØ Aper√ßu](#-aper√ßu)
- [‚ú® Fonctionnalit√©s](#-fonctionnalit√©s)
- [üõ†Ô∏è Technologies](#Ô∏è-technologies)
- [üìã Pr√©requis](#-pr√©requis)
- [üöÄ Installation](#-installation)
- [‚öôÔ∏è Configuration](#Ô∏è-configuration)
- [üíª Utilisation](#-utilisation)
- [üìÅ Architecture](#-architecture)
- [üß™ Tests](#-tests)
- [üì° APIs](#-apis)
- [üé® Personnalisation](#-personnalisation)
- [üöÄ D√©ploiement](#-d√©ploiement)
- [ü§ù Contribution](#-contribution)
- [üîß R√©solution de Probl√®mes](#-r√©solution-de-probl√®mes)
- [üìÑ Licence](#-licence)

## üéØ Aper√ßu

Cette application offre une interface moderne et intuitive pour :

- **Rechercher** des livres dans la base de donn√©es OpenLibrary (1,7M+ livres)
- **Explorer** les d√©tails enrichis avec informations Wikipedia
- **Naviguer** facilement entre les diff√©rentes sections
- **Basculer** automatiquement entre th√®mes clair/sombre
- **Suivre** les changements r√©cents en temps r√©el

### üñºÔ∏è Captures d'√©cran

```
Dans le dossier captures -captures
```

## ‚ú® Fonctionnalit√©s

### üîç Recherche Compl√®te

- **Barre de recherche globale** : Accessible depuis le header sur toutes les pages
- **Recherche avanc√©e** : Filtrage par titre, auteur, sujet, ann√©e, ISBN, lieu
- **R√©sultats enrichis** : Couvertures, m√©tadonn√©es, liens vers d√©tails
- **Navigation intelligente** : URLs propres avec param√®tres de recherche

### üé® Interface Utilisateur

- **Design responsive** : Compatible mobile, tablette, desktop
- **Th√®me adaptatif** : Bascule automatique sombre/clair selon l'heure (20h-6h)
- **Bascule manuelle** : Bouton Sun/Moon dans le header
- **Navigation fluide** : Routing client-side avec React Router DOM 7.6.2
- **Feedback utilisateur** : √âtats de chargement, erreurs, succ√®s

### üìñ Donn√©es Enrichies

- **OpenLibrary** : 1,7M+ livres, auteurs, couvertures, m√©tadonn√©es
- **Wikipedia** : Articles, extraits, images pour contexte culturel
- **Couvertures multiples** : Small (S), Medium (M), Large (L)
- **Changements temps r√©el** : Flux des derni√®res modifications (refresh 30s)

### ‚ö° Performance et Qualit√©

- **Build ultra-rapide** : Vite 6.3.5 avec HMR instantan√©
- **TypeScript strict** : Typage complet pour la robustesse
- **Tests complets** : Vitest + Testing Library (composants, pages, APIs)
- **Linting avanc√©** : ESLint avec r√®gles React/TypeScript
- **Code splitting** : Chargement optimis√© des ressources

## üõ†Ô∏è Technologies

### Frontend Core

| Technologie          | Version | Description                                 |
| -------------------- | ------- | ------------------------------------------- |
| **React**            | 19.1.0  | Framework UI avec derni√®res fonctionnalit√©s |
| **TypeScript**       | 5.8.3   | Typage statique et IntelliSense             |
| **Vite**             | 6.3.5   | Build tool ultra-rapide avec HMR            |
| **React Router DOM** | 7.6.2   | Routing client-side moderne                 |

### UI/UX

| Technologie          | Version | Description                       |
| -------------------- | ------- | --------------------------------- |
| **Lucide React**     | 0.513.0 | Ic√¥nes modernes et accessibles    |
| **CSS-in-JS**        | Native  | Styling inline pour la simplicit√© |
| **CSS Grid/Flexbox** | Native  | Layout responsive moderne         |

### D√©veloppement et Tests

| Technologie           | Version | Description                    |
| --------------------- | ------- | ------------------------------ |
| **Vitest**            | 3.2.3   | Framework de test ultra-rapide |
| **Testing Library**   | 16.3.0  | Tests composants React         |
| **Jest DOM**          | 6.6.3   | Matchers DOM pour tests        |
| **ESLint**            | 9.25.0  | Linting avec r√®gles React/TS   |
| **TypeScript ESLint** | 8.30.1  | Linting TypeScript avanc√©      |

## üìã Pr√©requis

### Environnement Syst√®me

- **Syst√®me d'exploitation** : Windows 10+, macOS 10.15+, Linux Ubuntu 18.04+
- **Node.js** : Version 18.0.0 ou sup√©rieure (LTS recommand√©e)
- **npm** : Version 8.0.0+ (inclus avec Node.js) ou **yarn** 1.22.0+
- **Git** : Version 2.30.0+ pour le clonage du repository

### V√©rification des Pr√©requis

```bash
# V√©rifier Node.js
node --version  # Doit afficher v18.0.0+

# V√©rifier npm
npm --version   # Doit afficher 8.0.0+

# V√©rifier Git
git --version   # Doit afficher 2.30.0+
```

### Navigateurs Support√©s

- **Chrome** 90+
- **Firefox** 88+
- **Safari** 14+
- **Edge** 90+

## üöÄ Installation

### 1. Clonage du Repository

```bash
# Cloner le projet
git clone https://github.com/Reuss77/3webProj.git

# Se d√©placer dans le dossier
cd openlibrary-app

# V√©rifier le contenu
ls -la
```

### 2. Installation des D√©pendances

```bash
# Avec npm (recommand√©)
npm install

# OU avec yarn
yarn install

# V√©rifier l'installation
npm list --depth=0
```

### 3. V√©rification de l'Installation

```bash
# V√©rifier que tous les packages sont install√©s
npm ls

# V√©rifier la configuration TypeScript
npx tsc --noEmit

# V√©rifier ESLint
npm run lint
```

### 4. Premier Lancement

```bash
# D√©marrer le serveur de d√©veloppement
npm run dev

# L'application sera accessible sur http://localhost:5173
```

Si le port 5173 est occup√©, Vite choisira automatiquement le port suivant disponible.

## ‚öôÔ∏è Configuration

### Configuration Vite (vite.config.ts)

Le fichier vite.config.ts configure le serveur de d√©veloppement sur le port 5173 avec acc√®s r√©seau activ√© et ouverture automatique du navigateur. Pour la production, il g√©n√®re des source maps, optimise pour les navigateurs modernes (target: esnext), et configure des alias pour les imports absolus avec "@" pointant vers "./src". Le plugin React est activ√© pour le support JSX et Fast Refresh.

### Configuration TypeScript (tsconfig.json)

Le fichier tsconfig.json configure TypeScript pour cibler ES2020 avec support des derni√®res fonctionnalit√©s JavaScript et DOM. Il active le mode strict avec toutes les v√©rifications avanc√©es (variables non utilis√©es, param√®tres non utilis√©s, cas fallthrough). La r√©solution des modules est configur√©e pour le bundler moderne avec support des extensions TypeScript et isolation des modules. Le JSX utilise la transformation React automatique, et des alias de chemin permettent l'import absolu avec "@/" pointant vers "./src/".

### Fichier setupTests.ts

Le fichier src/setupTests.ts configure l'environnement de test global en important Jest DOM pour les matchers sp√©cialis√©s. Il inclut un mock pour window.matchMedia n√©cessaire aux tests de th√®me, simulant les media queries avec tous les event listeners requis. Cette configuration permet aux tests de fonctionner correctement dans l'environnement jsdom sans navigateur r√©el.

## üíª Utilisation

### Scripts Disponibles

| Commande             | Description                       | Usage                   |
| -------------------- | --------------------------------- | ----------------------- |
| `npm run dev`        | Serveur de d√©veloppement avec HMR | D√©veloppement quotidien |
| `npm run build`      | Build de production optimis√©      | Avant d√©ploiement       |
| `npm run preview`    | Pr√©visualisation du build local   | Test du build           |
| `npm run lint`       | V√©rification ESLint               | Avant commit            |
| `npm run test`       | Lancement des tests               | CI/CD                   |
| `npm run test:watch` | Tests en mode watch               | D√©veloppement TDD       |

### D√©marrage Rapide

#### 1. Lancer en mode d√©veloppement

```bash
npm run dev
```

- Ouvre automatiquement http://localhost:5173
- Hot Module Replacement activ√©
- Source maps disponibles pour le d√©bogage

#### 2. Premi√®re utilisation

1. **Page d'accueil** (`/`) : Voir les changements r√©cents OpenLibrary
2. **Recherche simple** : Utiliser la barre de recherche du header
3. **Recherche avanc√©e** : Aller sur `/advanced` pour les filtres
4. **D√©tails livre** : Cliquer sur un r√©sultat pour voir `/book/:id`

#### 3. Navigation

- **Header permanent** : Logo, titre, barre de recherche, bouton th√®me
- **Routes principales** :
  - `/` - Accueil avec changements r√©cents
  - `/advanced` - Page de recherche avanc√©e
  - `/search?q=terme` - R√©sultats de recherche
  - `/book/OL123W` - D√©tails d'un livre sp√©cifique
  - `/favoris - Livres en favoris

### Exemples d'Utilisation

#### Recherche Simple via Header

L'exemple de recherche dans le header montre une fonction handleHeaderSearch qui prend une query string, la valide en enlevant les espaces, puis utilise navigate de React Router pour rediriger vers la page de r√©sultats avec l'URL /search et le param√®tre q encod√©. Cette approche maintient l'URL propre et permet le partage de liens de recherche.

#### Recherche Avanc√©e avec Routing

L'exemple de recherche avanc√©e montre un composant AdvancedSearchPage qui utilise le hook useNavigate de React Router. La fonction handleSearch construit les param√®tres URL avec URLSearchParams en ajoutant conditionnellement chaque champ (query, author, subject, year). Elle redirige ensuite vers /search avec tous les param√®tres encod√©s dans l'URL, permettant ainsi la sauvegarde et le partage des recherches avanc√©es.

#### Int√©gration Compl√®te

L'exemple d'int√©gration compl√®te montre comment structurer l'App principale avec BrowserRouter qui englobe tout l'arbre de composants, le Layout qui fournit la structure commune (header, footer), et AppRoutes qui g√®re le routing. Cette architecture garantit que le layout persiste lors de la navigation et que toutes les routes sont correctement configur√©es.

#### Livres aim√©s

Zone de livres favoris pour retrouver rapidement

## üìÅ Architecture

### Structure Compl√®te du Projet

```
openlibrary-app/
‚îú‚îÄ‚îÄ üìÅ public/                     # Assets statiques
‚îÇ   ‚îú‚îÄ‚îÄ üñºÔ∏è vite.svg              # Favicon Vite
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ index.html             # Template HTML principal
‚îú‚îÄ‚îÄ üìÅ src/                       # Code source principal
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ api/                   # Clients API et services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ openLibrary.ts     # API OpenLibrary (recherche, d√©tails, changements)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ wikipediaAPI.ts    # API Wikipedia (informations enrichies)
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components/            # Composants React r√©utilisables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ AdvancedSearch.tsx # Formulaire recherche avanc√©e
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ AdvancedSearchResults.tsx # Affichage r√©sultats filtres
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ BookCard.tsx       # Carte livre individuelle
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Layout.tsx         # Layout principal avec header/footer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ SearchBar.tsx      # Barre de recherche globale
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ ThemeToggle.tsx    # Bouton basculement th√®me
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ __tests__/         # Tests composants
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÑ BookCard.test.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ pages/                 # Pages/Vues principales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Home.tsx           # Page accueil + changements r√©cents
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ AdvancedSearchPage.tsx # Page recherche avanc√©e
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ BookDetails.tsx    # Page d√©tails livre individuel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ SearchResults.tsx  # Page r√©sultats recherche
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ __tests__/         # Tests pages
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÑ BookDetails.test.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÑ SearchResults.test.tsx
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ routes/                # Configuration routing
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ AppRoutes.tsx      # D√©finition routes React Router
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ assets/                # Resources statiques
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üñºÔ∏è logo.png          # Logo biblioth√®que municipale
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ types/                 # D√©finitions TypeScript
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ interfaces.ts      # Interfaces API et composants
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ App.tsx                # Composant racine
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ main.tsx               # Point d'entr√©e React
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ setupTests.ts          # Configuration globale tests
‚îú‚îÄ‚îÄ üìÑ package.json               # D√©pendances et scripts npm
‚îú‚îÄ‚îÄ üìÑ package-lock.json          # Lock file d√©pendances
‚îú‚îÄ‚îÄ üìÑ tsconfig.json              # Configuration TypeScript
‚îú‚îÄ‚îÄ üìÑ tsconfig.node.json         # Config TypeScript pour Node.js
‚îú‚îÄ‚îÄ üìÑ vite.config.ts             # Configuration Vite
‚îú‚îÄ‚îÄ üìÑ eslint.config.js           # Configuration ESLint
‚îú‚îÄ‚îÄ üìÑ .gitignore                 # Fichiers ignor√©s par Git
‚îî‚îÄ‚îÄ üìÑ README.md                  # Documentation (ce fichier)
```

### Architecture des Composants

#### üèóÔ∏è Layout Principal

```typescript
// Layout.tsx - Structure globale
Layout
‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îú‚îÄ‚îÄ Logo + Titre
‚îÇ   ‚îú‚îÄ‚îÄ SearchBar (recherche globale)
‚îÇ   ‚îî‚îÄ‚îÄ ThemeToggle (bouton th√®me)
‚îú‚îÄ‚îÄ Main
‚îÇ   ‚îî‚îÄ‚îÄ {children} (contenu des pages)
‚îî‚îÄ‚îÄ Footer
    ‚îî‚îÄ‚îÄ Copyright
```

#### üîÄ Configuration du Routing

Le fichier AppRoutes.tsx importe Routes et Route de React Router DOM pour d√©finir quatre routes principales : la route racine ("/") qui affiche le composant Home, "/advanced" pour AdvancedSearchPage, "/book/:id" pour BookDetails avec param√®tre dynamique id, et "/search" pour SearchResults. Cette configuration centralis√©e facilite la maintenance et l'ajout de nouvelles routes.

#### üéØ Flux de Donn√©es

```
User Input ‚Üí Component ‚Üí API Call ‚Üí State Update ‚Üí UI Re-render
     ‚Üì           ‚Üì           ‚Üì            ‚Üì            ‚Üì
   Search    SearchBar   openLibrary   useState    Results
```

### Composants Cl√©s Expliqu√©s

#### üìÑ openLibrary.ts

Ce fichier contient toutes les fonctions pour interagir avec l'API OpenLibrary. Il inclut des interfaces TypeScript pour les donn√©es (RecentChange, Author, Cover, BookDetails, SearchResult), des fonctions de recherche simple et avanc√©e, la r√©cup√©ration de d√©tails de livres avec gestion des auteurs et couvertures, et le suivi des changements r√©cents avec gestion d'erreur compl√®te.

#### üìÑ AdvancedSearch.tsx

Composant formulaire React avec √©tat local pour tous les champs de recherche (titre, auteur, sujet, ann√©e, ISBN, lieu). Il g√®re la soumission avec validation et appelle la fonction onSearch fournie en prop. Le design utilise une grille CSS responsive avec des inputs styl√©s et un bouton de soumission.

#### üìÑ ThemeToggle.tsx

Composant intelligent qui g√®re la d√©tection automatique du th√®me selon l'heure (20h-6h pour le mode sombre) et les pr√©f√©rences syst√®me. Il utilise les ic√¥nes Lucide React (Sun/Moon) et modifie l'attribut data-theme du document pour activer les variables CSS correspondantes.

#### üìÑ Home.tsx

Page d'accueil qui affiche les changements r√©cents d'OpenLibrary avec rafra√Æchissement automatique toutes les 30 secondes. Elle g√®re les √©tats de chargement, d'erreur et de succ√®s, avec un bouton de rafra√Æchissement manuel et un formatage des dates et informations.

## üß™ Tests

### Configuration Compl√®te des Tests

Test des diff√©rentes fonctionnalit√©s

#### Setup Global (setupTests.ts)

Le fichier de setup configure l'environnement de test global avec Jest DOM pour les matchers sp√©cialis√©s, des mocks pour window.matchMedia n√©cessaires aux tests de th√®me, un mock global pour fetch utilis√© dans les tests d'API, et le nettoyage automatique des mocks apr√®s chaque test.

#### Configuration Vitest

La configuration Vitest est int√©gr√©e dans vite.config.ts avec les options test. Elle active les globals pour √©viter les imports r√©p√©titifs, utilise l'environnement jsdom pour simuler le DOM, configure setupFiles vers le fichier setupTests.ts, active le support CSS, et configure la g√©n√©ration de coverage avec le provider v8. Les rapports incluent text, json et html avec exclusion des dossiers non pertinents comme node_modules, dist et les fichiers de test et configuration.

### Strat√©gies de Test Avanc√©es

#### 1. Tests de Composants

Le fichier **BookCard.test.tsx** teste l'affichage du composant BookCard avec des donn√©es mock r√©alistes. Il v√©rifie que le titre et l'auteur s'affichent correctement, que la couverture a le bon src, que le lien de navigation fonctionne, et g√®re les cas o√π la couverture est absente. Le composant est rendu avec MemoryRouter pour g√©rer le routing.

#### 2. Tests de Pages avec APIs

Le fichier **BookDetails.test.tsx** teste la page de d√©tails avec mocking complet des APIs OpenLibrary et Wikipedia. Il v√©rifie le chargement et l'affichage des d√©tails du livre, l'int√©gration des informations Wikipedia, la gestion des erreurs d'API, et le fonctionnement du bouton de changement de th√®me avec v√©rification de l'attribut data-theme.

#### 3. Tests de Recherche

Le fichier **SearchResults.test.tsx** teste la page de r√©sultats avec mocking de fetchSearchResults. Il utilise une fonction utilitaire renderWithRouter pour √©viter la duplication, teste l'affichage des r√©sultats, les messages de chargement avec gestion asynchrone, les cas sans r√©sultats, et la gestion d'erreur avec messages appropri√©s.

### Scripts de Test Avanc√©s

#### Coverage des Tests

```bash
# Coverage complet avec rapport HTML
npm run test -- --coverage --reporter=html

# Coverage avec seuils minimums
npm run test -- --coverage --reporter=text --reporter=lcov

# Tests avec watch sur fichiers sp√©cifiques
npm run test:watch -- BookCard

# Tests en mode verbose pour d√©bogage
npm run test -- --reporter=verbose
```

#### Bonnes Pratiques Utilis√©es

- **MemoryRouter** pour tester les composants avec routing sans navigateur
- **Mock des APIs** pour isolation compl√®te des tests des services externes
- **√âtats d'erreur** avec coverage des cas d'√©chec et messages d'erreur
- **√âtats de chargement** avec gestion asynchrone et waitFor
- **Fonctions utilitaires** comme renderWithRouter pour r√©duire la duplication
- **Donn√©es mock r√©alistes** qui refl√®tent la structure des vraies APIs

## üì° APIs

### OpenLibrary API Documentation

#### Endpoints Principaux

| Endpoint              | Description         | Param√®tres                      | Rate Limit  |
| --------------------- | ------------------- | ------------------------------- | ----------- |
| `/search.json`        | Recherche de livres | q, title, author, subject, year | 100 req/min |
| `/works/{id}.json`    | D√©tails d'un livre  | id (ex: OL123W)                 | 100 req/min |
| `/recentchanges.json` | Changements r√©cents | limit, offset                   | 10 req/min  |
| `/authors/{id}.json`  | D√©tails d'un auteur | id (ex: OL123A)                 | 100 req/min |

#### Param√®tres de Recherche Avanc√©e

L'interface SearchParams d√©finit tous les param√®tres accept√©s par l'API OpenLibrary pour la recherche avanc√©e. Elle inclut q pour la recherche g√©n√©rale, title pour le titre exact ou partiel, author pour le nom de l'auteur, subject pour le sujet/cat√©gorie, first_publish_year pour l'ann√©e de premi√®re publication, publisher pour l'√©diteur, isbn pour le num√©ro ISBN, place pour le lieu de publication, et limit/offset pour la pagination avec un maximum de 100 r√©sultats par requ√™te.

#### Exemples d'Utilisation API

Les exemples d'utilisation montrent trois patterns principaux. La recherche simple utilise searchBooks avec une query string et affiche le nombre de r√©sultats trouv√©s. La recherche avanc√©e combine plusieurs param√®tres comme title, author, subject et year avec searchBooksAdvanced. La r√©cup√©ration de d√©tails complets combine fetchBookDetails avec enrichissement Wikipedia via fetchWikiInfo, retournant un objet unifi√© avec toutes les informations disponibles.

### Wikipedia API Documentation

L'API Wikipedia fran√ßaise est configur√©e avec les param√®tres optimaux pour r√©cup√©rer les extraits d'introduction en texte brut et les miniatures de 300 pixels. La configuration CORS avec origin: '\*' permet les requ√™tes depuis le navigateur. Le fichier **wikipediaAPI.ts** g√®re la construction des URLs, les appels API et la gestion d'erreur avec retry automatique.

### Optimisation et Cache

Un syst√®me de cache simple en m√©moire avec TTL de 5 minutes √©vite les appels redondants. Les fonctions incluent une gestion d'erreur robuste avec retry et d√©lais progressifs. Toutes les APIs retournent des erreurs explicites pour faciliter le d√©bogage et l'affichage utilisateur.

## üé® Personnalisation

### Syst√®me de Th√®me CSS Variables

#### Variables CSS Globales

Le syst√®me de th√®me utilise des variables CSS personnalis√©es d√©finies dans :root pour le th√®me clair et [data-theme="dark"] pour le th√®me sombre. Les variables couvrent les couleurs principales (primary, primary-dark, primary-light), les couleurs de fond (background, background-secondary, background-tertiary), les couleurs de texte (text, text-secondary, text-muted), les ombres (shadow-sm, shadow-md), les bordures (border-radius, border-color), et les espacements. Cette approche permet une bascule instantan√©e entre th√®mes sans rechargement.

#### Hook de Th√®me Personnalis√©

Le hook useTheme g√®re trois √©tats de th√®me : 'light', 'dark' et 'auto'. Il utilise useState pour le th√®me s√©lectionn√© et resolvedTheme pour le th√®me effectif. L'effet detectTheme v√©rifie l'heure (mode sombre entre 20h et 6h) et les pr√©f√©rences syst√®me (prefers-color-scheme). Le hook √©coute les changements de pr√©f√©rences syst√®me avec addEventListener et met √† jour l'attribut data-theme du document automatiquement.

### Configuration de l'Identit√© Visuelle

#### Branding Centralis√©

Le fichier config/branding.ts centralise toute la configuration de l'identit√© visuelle. Il contient les informations de l'organisation (nom complet, nom court, description, site web, email), la configuration du logo (src, alt, dimensions), les couleurs de marque (brand primary et secondary), et peut inclure les liens sociaux. Cette approche facilite la personnalisation pour d'autres biblioth√®ques en modifiant simplement un fichier de configuration central.

Le **Layout.tsx** utilise cette configuration pour afficher le logo, le titre et maintenir la coh√©rence visuelle. Le syst√®me est facilement personnalisable pour d'autres biblioth√®ques en modifiant simplement le fichier de configuration.

## üöÄ D√©ploiement

### Build de Production

```bash
# Build optimis√© pour la production
npm run build

# V√©rifier la taille des bundles
npx vite-bundle-analyzer dist

# Pr√©visualiser le build localement
npm run preview
```

La configuration de build optimise automatiquement le code avec minification, tree-shaking, et code splitting. Les assets sont hash√©s pour le cache busting et les source maps sont g√©n√©r√©es pour le d√©bogage production.

### D√©ploiement sur Netlify

#### Configuration netlify.toml

Le fichier netlify.toml configure Netlify pour publier le dossier dist avec la commande npm run build et Node.js version 18. Il inclut des redirections SPA qui redirigent toutes les routes vers index.html avec status 200 pour g√©rer le routing client-side. Les headers de s√©curit√© incluent X-Frame-Options DENY, X-Content-Type-Options nosniff, et X-XSS-Protection. Les assets statiques dans /assets/ ont un cache long terme avec Cache-Control public, max-age d'un an et immutable.

#### D√©ploiement CLI

```bash
# Installer Netlify CLI
npm install -g netlify-cli

# Login et d√©ploiement
netlify login
netlify init
netlify deploy --prod --dir=dist
```

### D√©ploiement sur Vercel

#### Configuration vercel.json

Le fichier vercel.json configure le d√©ploiement avec la version 2 de l'API Vercel, sp√©cifie npm run build comme commande de build et dist comme dossier de sortie. Il d√©tecte automatiquement le framework Vite. Les rewrites redirigent toutes les routes vers index.html pour g√©rer le routing client-side SPA. Les headers configurent un cache long terme pour les assets statiques avec Cache-Control public et max-age d'un an. La variable d'environnement NODE_VERSION est fix√©e √† 18.

#### D√©ploiement CLI

```bash
# Installer et d√©ployer
npm install -g vercel
vercel login
vercel --prod
```

### D√©ploiement sur GitHub Pages

#### Workflow GitHub Actions

Le fichier .github/workflows/deploy.yml configure le d√©ploiement automatique sur GitHub Pages. Il se d√©clenche sur les push vers la branche main et ex√©cute un job build-and-deploy sur ubuntu-latest. Les √©tapes incluent le checkout du code, setup de Node.js 18 avec cache npm, installation des d√©pendances avec npm ci, ex√©cution des tests, build de production, et d√©ploiement vers GitHub Pages avec peaceiris/actions-gh-pages. Le d√©ploiement utilise GITHUB_TOKEN et publie le dossier dist seulement si la branche est main.

### Variables d'Environnement

#### Configuration .env

Le fichier .env.example documente toutes les variables d'environnement n√©cessaires avec leurs valeurs par d√©faut. Il inclut VITE*OPENLIBRARY_API_BASE et VITE_WIKIPEDIA_API_BASE pour les URLs d'API, VITE_APP_TITLE pour le titre de l'application, et des feature flags comme VITE_ENABLE_ANALYTICS et VITE_ENABLE_CACHE. Les variables Vite doivent √™tre pr√©fix√©es par VITE* pour √™tre accessible c√¥t√© client. Le code valide la pr√©sence des variables requises au d√©marrage.

Le code valide la pr√©sence des variables requises au d√©marrage et utilise des valeurs par d√©faut appropri√©es. Cette configuration facilite le d√©ploiement dans diff√©rents environnements.

## ü§ù Contribution

### Guidelines de Contribution

#### 1. Setup Environnement

```bash
# Fork et clone
git clone https://github.com/votre-username/openlibrary-app.git
cd openlibrary-app

# Installation et v√©rification
npm install
npm run dev
npm run test
npm run lint
```

#### 2. Standards de Code

##### Conventions de Nommage

- **Fichiers composants** : PascalCase (BookCard.tsx, AdvancedSearchPage.tsx)
- **Fichiers services** : camelCase (openLibrary.ts, wikipediaAPI.ts)
- **Variables/fonctions** : camelCase (bookDetails, fetchBookData)
- **Constantes** : SCREAMING_SNAKE_CASE (CACHE_DURATION, API_BASE_URL)

##### Structure des Composants

Chaque composant doit inclure une documentation JSDoc compl√®te, des interfaces TypeScript pour les props, une gestion d'erreur appropri√©e, et des tests unitaires couvrant les cas principaux et d'erreur.

##### Tests Obligatoires

Tous les nouveaux composants n√©cessitent des tests couvrant le rendu de base, la gestion des props requises, les interactions utilisateur, et les cas d'erreur. Les tests doivent utiliser Testing Library et les mocks appropri√©s.

#### 3. Workflow Git

##### Branches

- `main` - Production stable
- `develop` - D√©veloppement en cours
- `feature/nom-feature` - Nouvelles fonctionnalit√©s
- `fix/nom-bug` - Corrections de bugs
- `refactor/nom-refactor` - Refactoring

##### Messages de Commit

```bash
# Format: type(scope): description courte
feat(search): ajoute filtres par date publication
fix(api): corrige gestion erreur Wikipedia
docs(readme): met √† jour instructions installation
style(layout): am√©liore responsive header
refactor(hooks): simplifie useTheme hook
test(components): ajoute tests BookCard
chore(deps): met √† jour d√©pendances
```

##### Pull Request Process

Chaque PR doit inclure une description claire des changements, les tests appropri√©s, la mise √† jour de la documentation si n√©cessaire, et passer la review d'au moins un mainteneur.

### Review Process

Les crit√®res de review incluent la fonctionnalit√© (code fonctionne comme attendu), les tests (coverage maintenue), la performance (pas de r√©gression), l'accessibilit√© (standards WCAG), le TypeScript (typage correct), et la documentation (JSDoc et README mis √† jour).

## üîß R√©solution de Probl√®mes

### Probl√®mes Courants

#### 1. Erreurs d'Installation

```bash
# Solutions par ordre de pr√©f√©rence:

# Nettoyer le cache npm
npm cache clean --force
rm -rf node_modules package-lock.json
npm install

# Utiliser la version exacte de Node.js
nvm use 18
npm install

# Installer avec legacy peer deps
npm install --legacy-peer-deps

# V√©rifier l'espace disque
df -h
```

#### 2. Probl√®mes de D√©veloppement

```bash
# HMR ne fonctionne pas
npm run dev -- --force

# Tests √©chouent
npm run test -- --reporter=verbose
npm run test -- BookCard.test.tsx

# Build √©choue
npm run build -- --logLevel info
npx vite-bundle-analyzer dist
```

#### 3. Debugging Avanc√©

##### Configuration VS Code

Le fichier .vscode/settings.json configure VS Code pour pr√©f√©rer les imports relatifs, active la correction automatique ESLint et l'organisation des imports √† la sauvegarde. Il configure Emmet pour supporter TypeScript avec la syntaxe JSX (typescriptreact). Ces param√®tres am√©liorent l'exp√©rience de d√©veloppement avec auto-formatting et suggestions intelligentes.

##### Outils de Debug

- **React Developer Tools** : Extension navigateur obligatoire
- **Vite Debug** : `DEBUG=vite:* npm run dev`
- **Network Debug** : Intercepter les requ√™tes fetch en d√©veloppement

### Performance Optimization

#### Bundle Analysis

```bash
# Analyser la taille des bundles
npm run build
npx vite-bundle-analyzer dist

# Identifier les gros imports
npx webpack-bundle-analyzer dist/assets/*.js
```

#### Optimisation M√©moire

Le hook useMemoryCheck peut d√©tecter les fuites de m√©moire en d√©veloppement en monitorant l'utilisation du heap JavaScript toutes les 5 secondes avec performance.memory.

## üìÑ Licence

### MIT License

Ce projet est distribu√© sous licence MIT, une licence open source permissive qui autorise l'utilisation, la modification, la distribution et la commercialisation du logiciel. La seule obligation est de conserver l'avis de copyright et la licence dans toutes les copies.

La licence MIT garantit que le logiciel est fourni "tel quel" sans garantie d'aucune sorte. Les auteurs ne peuvent √™tre tenus responsables des dommages r√©sultant de l'utilisation du logiciel.

---

## üìû Support et Contact

### Ressources d'Aide


- **Documentation** : [docs.bibliotheque-municipale.fr](https://docs.bibliotheque-municipale.fr)
- **Issues GitHub** : [https://github.com/Reuss77/3webProj.git]
- **Discussions** : [github.com/Reuss77/3webProj/discussions](https://github.com/Reuss773webProj/discussions)


### Contact

- **Email** : contact@bibliotheque-municipale.fr
- **Phone** : +33 1 23 45 67 89
- **Discord** : [discord.gg/bibliotheque](https://discord.gg/bibliotheque)

### Roadmap

Les fonctionnalit√©s pr√©vues incluent un syst√®me de favoris, l'historique des recherches, l'export en PDF/CSV, un cache intelligent, le support PWA, et l'internationalisation. Les am√©liorations techniques planifi√©es comprennent la pagination, le lazy loading, les service workers, et les error boundaries React.

---

<div align="center">

**[‚¨Ü Retour en haut](#-biblioth√®que-municipale---application-web)**

_D√©velopp√© avec ‚ù§Ô∏è pour la communaut√© des lecteurs_

![Stars](https://img.shields.io/github/stars/username/openlibrary-app?style=social)
![Forks](https://img.shields.io/github/forks/username/openlibrary-app?style=social)
![Issues](https://img.shields.io/github/issues/username/openlibrary-app)
![PRs](https://img.shields.io/github/issues-pr/username/openlibrary-app)

</div>
